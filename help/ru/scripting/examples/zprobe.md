# Z-зонд

Распространенный пример поиска нуля по Z-координате.
Т.к. поиск может производиться в процессе выполнения УП (например, при смене инструмента), предусмотрено сохранение и восстановление режимов работы ЧПУ.

Смещение от реального положения инструмента до поверхности после зондирования можно заложить в команду G92.
В текущем примере считается, что смещение равно нулю.

```js
// Сохраняем текущий режим парсера (абсолютное/относительное позиционирование, плоскости, единицы и т.д.)
app.device.storeParserState();

// Запускаем цикл точного зондирования поверхности:
app.device.sendCommands([
    "G21G91",           // 1. Переводим в относительные координаты (G91) и миллиметры (G21)
    "G38.2Z-30F100",    // 2. Быстрое касание: опускаемся вниз на 30 мм со скоростью 100 мм/мин
    "G0Z1",             // 3. Поднимаемся на 1 мм после первого касания
    "G38.2Z-2F10",      // 4. Точное касание: медленно опускаемся ещё на 2 мм со скоростью 10 мм/мин
    "G92Z0",            // 5. Устанавливаем текущую позицию Z как новый ноль (обнуляем Z)
    "G91G0Z5"           // 6. Безопасный отъезд: поднимаемся ещё на 5 мм относительно нового нуля
]);

// Ждём, пока все команды выполнятся и вернут подтверждение
app.device.waitResponses();

// Восстанавливаем исходный режим парсера
app.device.restoreParserState();
```